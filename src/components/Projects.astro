---
import { getCollection } from "astro:content";
import ProjectCard from "./ProjectCard.astro";
import { ArrowRight } from "@lucide/astro";


const projectEntries = await getCollection("projects");

// Sort by start date, most recent first
const sortedProjects = projectEntries.sort(
  (a, b) => b.data.startDate.getTime() - a.data.startDate.getTime()
).slice(0,3);
---

<section id="projects" class="py-20 px-4 bg-base-300">
  <div class="max-w-6xl mx-auto">
    <div class="text-center mb-12">
      <h2 class="text-4xl font-bold mb-4">Check out his latest work</h2>
      <p class="text-lg text-base-content/70">
          A mix of research projects, hackathons, and things he's built for fun. Here are the 3 most recent ones.
      </p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      {sortedProjects.map((project) => (
        <ProjectCard project={project} />
      ))}
    </div>
  </div>
  <div class="text-center mt-12">
    <a href="/projects" class="btn btn-primary gap-2">
      View All Projects
      <ArrowRight class="size-4" />
    </a>
  </div>
</section>
